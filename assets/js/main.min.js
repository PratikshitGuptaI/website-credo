// 'use strict';

// const loc = window.location.hostname;
// let gasURL;
let gasContactURL;

let loc;

// let gasSubscriptionURL;

if (loc === 'cloudnowtech.com' || loc === 'www.cloudnowtech.com') {
  // gasURL =
  //   'https://script.google.com add/a/cloudnowtech.com/macros/s/AKfycbzTSDNAquq5gbFEZo5qycbEetkVQ-fcYar3HIU3Dv-UkB9uVhk/exec';

  gasContactURL =
    'https://script.google.com/macros/s/AKfycbxP9QB3ywfSnLTgEzqHVGnZmhtlqi3au81M-Hm6FMHYAuiWQLxN3uy3VTIppfxn0cRI/exec';

  // gasSubscriptionURL =
  //   'https://script.google.com/macros/s/AKfycbzvuUATKuFZcqv6UtJi6o065SAtgqvSzUPZoPBWiWr0L3eDAP0/exec';
} else {
  // gasURL =
  //   'https://script.google.com/macros/s/AKfycbweJiwtc79yTMR1efBBHPr1erjfGb-qHNHGw3v5HtFXzdpV37Q/exec';

  // gasContactURL =
  // 'https://script.google.com/a/cloudnowtech.com/macros/s/AKfycbw_550cCYzJyHlgQWpKDysOU4v9IzAc6n0uotih7A/exec';
  gasContactURL =
    'https://script.google.com/macros/s/AKfycbxP9QB3ywfSnLTgEzqHVGnZmhtlqi3au81M-Hm6FMHYAuiWQLxN3uy3VTIppfxn0cRI/exec';

  // gasSubscriptionURL =
  //   'https://script.google.com/macros/s/AKfycbzvuUATKuFZcqv6UtJi6o065SAtgqvSzUPZoPBWiWr0L3eDAP0/exec';
}

// const requestUri = 'https://www.cloudnowtech.com/resume/';
// const serverURL = `${requestUri}career.php`;

$(() => {
  $('#name').keydown(e => {
    if (e.ctrlKey || e.altKey) {
      e.preventDefault();
    } else {
      const key = e.keyCode;
      if (
        !(
          key === 8 ||
          key === 9 ||
          key === 32 ||
          key === 46 ||
          (key >= 35 && key <= 40) ||
          (key >= 65 && key <= 90)
        )
      ) {
        e.preventDefault();
        $('.textOnly')
          .html('Text Only')
          .show()
          .fadeOut('slow');
      }
    }
  });
  $('#name1').keydown(e => {
    if (e.ctrlKey || e.altKey) {
      e.preventDefault();
    } else {
      const key = e.keyCode;
      if (
        !(
          key === 8 ||
          key === 9 ||
          key === 32 ||
          key === 46 ||
          (key >= 35 && key <= 40) ||
          (key >= 65 && key <= 90)
        )
      ) {
        e.preventDefault();
        $('.textOnly')
          .html('Text Only')
          .show()
          .fadeOut('slow');
      }
    }
  });
});

$('#about').change(function() {
  const val = $(this).val();
  if (val === 'Services') {
    $('#selectServices')
      .removeClass('d-none')
      .addClass('d-inline-block');
    $('#selectProducts')
      .removeClass('d-inline-block')
      .addClass('d-none');
  } else if (val === 'Products') {
    $('#selectProducts')
      .removeClass('d-none')
      .addClass('d-inline-block');
    $('#selectServices')
      .removeClass('d-inline-block')
      .addClass('d-none');
  }
});

$('#about1').change(function() {
  const val = $(this).val();
  if (val === 'Services') {
    $('#selectServices1')
      .removeClass('d-none')
      .addClass('d-inline-block');
    $('#selectProducts1')
      .removeClass('d-inline-block')
      .addClass('d-none');
  } else if (val === 'Products') {
    $('#selectProducts1')
      .removeClass('d-none')
      .addClass('d-inline-block');
    $('#selectServices1')
      .removeClass('d-inline-block')
      .addClass('d-none');
  }
});

$('#name').on('keypress', function(e) {
  if (e.which === 32 && !this.value.length) e.preventDefault();
});

$('#name1').on('keypress', function(e) {
  if (e.which === 32 && !this.value.length) e.preventDefault();
});

$(document).on('keypress', 'input.phone', e => {
  // -1 !== $.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) ||
  // /65|67|86|88/.test(e.keyCode) && (!0 === e.ctrlKey || !0 === e.metaKey) ||
  // 35 <= e.keyCode && 40 >= e.keyCode || (e.shiftKey ||
  // 48 > e.keyCode || 57 < e.keyCode) && (96 > e.keyCode || 105 < e.keyCode) && e.preventDefault()
  if (e.which !== 8 && e.which !== 0 && (e.which < 48 || e.which > 57)) {
    e.preventDefault();
  }
});
// custom email validation rule
jQuery.validator.addMethod(
  'customemail',
  value => {
    return /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(value);
  },
  'Incorrect Email',
);
$.validator.addMethod(
  'bussinessemail',
  value => {
    return /^[a-z0-9._%+-]+@(?!gmail\.com|yahoo\.com|hotmail\.com|outlook\.com)(?:[a-z0-9.-]+\.?)+$/.test(
      value,
    );
  },
  'Please enter a work email ID',
);
// get-in-touch
// form submission for sayHelloForm
$('#sayHelloForm').validate({
  rules: {
    name: {
      required: true,
      noSpace: false,
    },
    email: {
      required: {
        depends() {
          $(this).val($.trim($(this).val()));
          return true;
        },
      },
      bussinessemail: true,
      customemail: true,
    },
    about: {
      required: false,
    },
    services: {
      required: false,
    },
    phone: {
      required: true,
      minlength: 10,
      maxlength: 10,
    },
    message: {
      required: false,
      noSpace: false,
    },
  },
  messages: {
    name: {
      required: 'Please enter your name',
    },
    email: {
      required: 'Please enter a valid email address',
    },
    phone: {
      required: 'Please enter your phone number',
      minlength: 'Please enter 10 digit phone number',
      maxlength: 'Please enter 10 digit phone number',
    },
    message: {
      required: 'Please enter your messgae',
    },
  },
  errorElement: 'em',
  errorPlacement(error, element) {
    error.addClass('help-block');
    error.insertAfter(element);
  },
  submitHandler() {
    // $('.btn-submit').button('loading');
    $('#sayHello .btn-submit').html("<i class='fa fa-circle-o-notch fa-spin'></i> Submitting");
    $('#sayHello .btn-submit').attr('disabled', 'disabled');

    const name = $('#name')
      .val()
      .trim();
    const email = $('#email')
      .val()
      .trim();
    const phone = $('#phone')
      .val()
      .trim();
    // const about = $('#about')
    //   .val()
    //   .trim();
    const services = $('#selectServices')
      .val()
      .trim();
    // const products = $('#selectProducts')
    //   .val()
    //   .trim();
    // var e = document.getElementById("about1");
    // var about = e.options[e.textContent];
    const formData = new FormData();
    formData.append('Name', name);
    formData.append('Email', email);
    formData.append('Phone', phone);
    // formData.append('About', about);
    // if (about === 'Services') {
    formData.append('Services', services);
    // } else {
    //   formData.append('Products', products);
    // }
    // formData.append('Message', message);
    formData.append('Type', 'connect');
    $.ajax({
      type: 'POST',
      url: gasContactURL,
      data: formData,
      success() {
        $('#sayHello .btn-submit').html('send');
        $('#sayHello .btn-submit').removeAttr('disabled');
        window.location.replace('thank-you.html');
        // swal('Thanks', 'Someone from CloudNow will be in touch!', 'success').then(() => {
        //   document.getElementById('sayHelloForm').reset();
        //   $('#sayHello').modal('hide');
        // });
      },
      error() {
        $('#sayHello .btn-submit').html('send');
        $('#sayHello .btn-submit').removeAttr('disabled');
        swal('Error', 'Error submitting your request', 'error');
      },
      contentType: false,
      processData: false,
      cache: false,
    });
  },
});

// form submission for get-in-touch
$('#sayHelloFormEmbedded').validate({
  rules: {
    name1: {
      required: true,
      noSpace: false,
    },
    email1: {
      required: {
        depends() {
          $(this).val($.trim($(this).val()));
          return true;
        },
      },
      bussinessemail: true,
      customemail: true,
    },
    about1: {
      required: false,
    },
    services1: {
      required: false,
    },
    phone1: {
      required: true,
      minlength: 10,
      maxlength: 10,
    },
    message1: {
      required: false,
      noSpace: false,
    },
  },
  messages: {
    name1: {
      required: 'Enter a name',
    },
    email1: {
      required: 'Enter a email address',
    },
    phone1: {
      required: 'Enter a phone number',
      minlength: 'Please Enter 10 digit phone number.',
      maxlength: 'Please Enter 10 digit phone number.',
    },
    message1: {
      required: 'Please enter a messgae',
    },
  },
  errorElement: 'em',
  errorPlacement(error, element) {
    error.addClass('help-block');
    error.insertAfter(element);
  },
  submitHandler() {
    // $('.btn-submit').button('loading');
    $('#sayHello .btn-submit').html("<i class='fa fa-circle-o-notch fa-spin'></i> Submitting");
    $('#sayHello .btn-submit').attr('disabled', 'disabled');

    const name = $('#name1')
      .val()
      .trim();
    const email = $('#email1')
      .val()
      .trim();
    const phone = $('#phone1')
      .val()
      .trim();
    // const about = $('#about1')
    //   .val()
    //   .trim();
    const services = $('#selectServices1')
      .val()
      .trim();
    // const products = $('#selectProducts')
    //   .val()
    //   .trim();
    // var e = document.getElementById("about1");
    // var about = e.options[e.textContent];
    const formData = new FormData();
    formData.append('Name', name);
    formData.append('Email', email);
    formData.append('Phone', phone);
    // formData.append('About', about);
    // if (about === 'Services') {
    formData.append('Services', services);
    // } else {
    //   formData.append('Products', products);
    // }
    // formData.append('Message', message);
    formData.append('Type', 'contact');
    $.ajax({
      type: 'POST',
      url: gasContactURL,
      data: formData,
      success() {
        $('#sayHello .btn-submit').html('send');
        $('#sayHello .btn-submit').removeAttr('disabled');
        window.location.replace('thank-you.html');
        // swal('Thanks', 'Someone from CloudNow will be in touch!', 'success').then(() => {
        //   document.getElementById('get-in-touch').reset();
        //   $('#sayHello').modal('hide');
        // });
      },
      error() {
        $('#sayHello .btn-submit').html('send');
        $('#sayHello .btn-submit').removeAttr('disabled');
        swal('Error', 'Error submitting your request', 'error');
      },
      contentType: false,
      processData: false,
      cache: false,
    });
  },
});
